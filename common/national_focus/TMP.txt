focus_tree = {
	id = TMP_starting_tree
	country = {
		factor = 0

		modifier = {
			add = 20
			tag = TMP
		}
	}
	default = no
	continuous_focus_position = { x = 550 y = 1800 }
	initial_show_position = { focus = TMP_between_two_worlds }
	shared_focus = TMP_between_two_worlds
}

focus_tree = {
	id = TMP_wartime_tree
	country = {
		factor = 0
		
		modifier = {
			add = 10
			tag = TMP
		}
	}
	default = no
	continuous_focus_position = { x = 550 y = 1800 }
	initial_show_position = { focus = TMP_unrelenting_offensive }
	shared_focus = TMP_unrelenting_offensive
}


###################
###STARTING TREE###
###################

shared_focus = {
	id = TMP_between_two_worlds
	icon = GFX_goal_generic_construction
	x = 8
	y = 0
	cost = 5
	ai_will_do = {
		factor = 100
	}
	
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_between_two_worlds"
		add_political_power = 25
		add_stability = 0.05
		country_event = tempest.1
	}
	search_filters = { FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = TMP_an_old_life
	icon = GFX_goal_generic_construction
	x = -2
	y = 1
	relative_position_id = TMP_between_two_worlds
	cost = 5
	prerequisite = {
		focus = TMP_between_two_worlds
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_an_old_life"
		add_manpower = 150
		add_war_support = 0.05
		country_event = tempest.2
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_drill_troops
	icon = GFX_goal_generic_construction
	x = -1
	y = 2
	relative_position_id = TMP_an_old_life
	cost = 5
	prerequisite = {
		focus = TMP_an_old_life
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_drill_troops"
		add_timed_idea = {
			idea = TMP_army_drilling
			days = 150
		}
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_tactics_and_strategy
	icon = GFX_goal_generic_construction
	x = -1
	y = 1
	relative_position_id = TMP_drill_troops
	cost = 5
	prerequisite = {
		focus = TMP_drill_troops
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_tactics_and_strategy"
		add_doctrine_cost_reduction = {
			name = land_doc_bonus
			cost_reduction = 0.5
			uses = 1
			category = land_doctrine
		}
		every_army_leader = {
			add_attack = 1
		}
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_open_armories
	icon = GFX_goal_generic_construction
	x = 1
	y = 1
	relative_position_id = TMP_drill_troops
	cost = 5
	prerequisite = {
		focus = TMP_drill_troops
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_open_armories"
		add_equipment_to_stockpile = {
			type = infantry_equipment
			producer = TMP
			amount = 100
		}
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_show_strength
	icon = GFX_goal_generic_construction
	x = 1
	y = 1
	relative_position_id = TMP_tactics_and_strategy
	cost = 5
	prerequisite = {
		focus = TMP_tactics_and_strategy
	}
	prerequisite = {
		focus = TMP_open_armories
	}
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_show_strength"
		custom_effect_tooltip = TMP_tempest_bop_decisions_unlock_tt
		if = {
			limit = {
				NOT = {
					has_completed_focus = TMP_show_friendship
				}
			}
			custom_effect_tooltip = TMP_stormside_first_tt
			if = {
				limit = {
					power_balance_value = {
						id = TMP_tempest_balance
						value > -1
					}
				}
				add_power_balance_value = {
					id = TMP_tempest_balance
					value = -0.2
				}
			}
			else = {
				add_war_support = 0.1
			}
		}
		country_event = tempest.3
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_some_older_friends
	icon = GFX_goal_generic_construction
	x = 2
	y = 1
	relative_position_id = TMP_between_two_worlds
	cost = 5
	prerequisite = {
		focus = TMP_between_two_worlds
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_some_older_friends"
		add_political_power = 50
		348 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
		country_event = tempest.4
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_settle_diaspora
	icon = GFX_goal_generic_construction
	x = 1
	y = 2
	relative_position_id = TMP_some_older_friends
	cost = 5
	prerequisite = {
		focus = TMP_some_older_friends
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_settle_diaspora"
		add_stability = 0.05
		348 = {
			add_manpower = 150
		}
		981 = {
			add_manpower = 100
		}
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_courage_ponykind
	icon = GFX_goal_generic_construction
	x = -1
	y = 1
	relative_position_id = TMP_settle_diaspora
	cost = 5
	prerequisite = {
		focus = TMP_settle_diaspora
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_courage_ponykind"
		custom_effect_tooltip = TMP_pony_volunteers_tt
		hidden_effect = {
			load_oob = "TMP_pony_volunteers"
		}
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_loyalty_to_princess
	icon = GFX_goal_generic_construction
	x = 1
	y = 1
	relative_position_id = TMP_settle_diaspora
	cost = 5
	prerequisite = {
		focus = TMP_settle_diaspora
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_loyalty_to_princess"
		add_stability = 0.05
		348 = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
		add_manpower = 100
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_show_friendship
	icon = GFX_goal_generic_construction
	x = 1
	y = 1
	relative_position_id = TMP_courage_ponykind
	cost = 5
	prerequisite = {
		focus = TMP_courage_ponykind
	}
	prerequisite = {
		focus = TMP_loyalty_to_princess
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_show_friendship"
		custom_effect_tooltip = TMP_tempest_bop_decisions_unlock_tt
		if = {
			limit = {
				NOT = {
					has_completed_focus = TMP_show_strength
				}
			}
			custom_effect_tooltip = TMP_ponyside_first_tt
			if = {
				limit = {
					power_balance_value = {
						id = TMP_tempest_balance
						value < 1
					}
				}
				add_power_balance_value = {
					id = TMP_tempest_balance
					value = 0.2
				}
			}
			else = {
				add_stability = 0.1
			}
		}
		country_event = tempest.5
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_deals_and_appeals
	icon = GFX_goal_generic_construction
	x = 2
	y = 1
	relative_position_id = TMP_an_old_life
	cost = 5
	prerequisite = {
		focus = TMP_an_old_life
	}
	prerequisite = {
		focus = TMP_some_older_friends
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_deals_and_appeals"
		country_event = tempest.6
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_rein_in_equestrians
	icon = GFX_goal_generic_construction
	x = -1
	y = 1
	relative_position_id = TMP_deals_and_appeals
	cost = 5
	prerequisite = {
		focus = TMP_deals_and_appeals
	}
	mutually_exclusive = {
		focus = TMP_full_speed_ahead
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_rein_in_equestrians"
		swap_ideas = {
			remove_idea = TMP_equestrian_technological_monopoly
			add_idea = TMP_technological_stagnation
		}
		if = {
			limit = {
				power_balance_value = {
					id = TMP_tempest_balance
					value > -1
				}
			}
			add_power_balance_value = {
				id = TMP_tempest_balance
				value = -0.2
			}
		}
		else = {
			add_war_support = 0.1
		}
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_full_speed_ahead
	icon = GFX_goal_generic_construction
	x = 1
	y = 1
	relative_position_id = TMP_deals_and_appeals
	cost = 5
	prerequisite = {
		focus = TMP_deals_and_appeals
	}
	mutually_exclusive = {
		focus = TMP_rein_in_equestrians
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_full_speed_ahead"
		swap_ideas = {
			remove_idea = TMP_equestrian_technological_monopoly
			add_idea = TMP_technological_instability
		}
		if = {
			limit = {
				power_balance_value = {
					id = TMP_tempest_balance
					value < 1
				}
			}
			add_power_balance_value = {
				id = TMP_tempest_balance
				value = 0.2
			}
		}
		else = {
			add_stability = 0.1
		}
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_second_in_command
	icon = GFX_goal_generic_construction
	x = 1
	y = 1
	relative_position_id = TMP_rein_in_equestrians
	cost = 5
	prerequisite = {
		focus = TMP_rein_in_equestrians
		focus = TMP_full_speed_ahead
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_second_in_command"
		country_event = tempest.7
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_uphold_storm_legacy
	icon = GFX_goal_generic_construction
	x = -1
	y = 1
	relative_position_id = TMP_second_in_command
	cost = 5
	prerequisite = {
		focus = TMP_second_in_command
	}
	mutually_exclusive = {
		focus = TMP_beacon_new_ideals
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_uphold_storm_legacy"
		add_country_leader_trait = storm_king_heir
		if = {
			limit = {
				power_balance_value = {
					id = TMP_tempest_balance
					value > -1
				}
			}
			add_power_balance_value = {
				id = TMP_tempest_balance
				value = -0.2
			}
		}
		else = {
			add_war_support = 0.1
		}
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_beacon_new_ideals
	icon = GFX_goal_generic_construction
	x = 1
	y = 1
	relative_position_id = TMP_second_in_command
	cost = 5
	prerequisite = {
		focus = TMP_second_in_command
	}
	mutually_exclusive = {
		focus = TMP_uphold_storm_legacy
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_beacon_new_ideals"
		add_country_leader_trait = harmonic_guardian
		if = {
			limit = {
				power_balance_value = {
					id = TMP_tempest_balance
					value < 1
				}
			}
			add_power_balance_value = {
				id = TMP_tempest_balance
				value = 0.2
			}
		}
		else = {
			add_stability = 0.1
		}
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_eye_of_storm
	icon = GFX_goal_generic_construction
	x = 1
	y = 1
	relative_position_id = TMP_uphold_storm_legacy
	cost = 5
	prerequisite = {
		focus = TMP_show_strength
	}
	prerequisite = {
		focus = TMP_uphold_storm_legacy
		focus = TMP_beacon_new_ideals
	}
	prerequisite = {
		focus = TMP_show_friendship
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_eye_of_storm"
		custom_effect_tooltip = TMP_stormwar_unlock_tt
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}


##################
###WARTIME TREE###
##################

shared_focus = {
	id = TMP_unrelenting_offensive
	icon = GFX_goal_generic_construction
	x = 8
	y = 0
	cost = 5
	ai_will_do = {
		factor = 100
	}
	
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_unrelenting_offensive"
		if = {
			limit = {
				has_idea = TMP_storm_offensive
			}
			custom_effect_tooltip = TMP_offensive_timer_reset_tt
			hidden_effect = {
				remove_ideas = TMP_storm_offensive
				add_timed_idea = {
					idea = TMP_storm_offensive
					days = 150
				}
			}
		}
		else = {
			add_timed_idea = {
				idea = TMP_storm_offensive
				days = 100
			}
		}
	}
	search_filters = { FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL }
}

shared_focus = {
	id = TMP_encourage_enemy_defections
	icon = GFX_goal_generic_construction
	x = -4
	y = 1
	relative_position_id = TMP_unrelenting_offensive
	cost = 5
	prerequisite = {
		focus = TMP_unrelenting_offensive
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_encourage_enemy_defections"
		STM = {
			country_event = tempest.10
		}
		if = {
			limit = {
				has_country_flag = TMP_grubber_empowered
				#grubber idea check
			}
			effect_tooltip = {
				STM = {
					add_ideas = TMP_army_defections_empowered
				}
			}
		}
		else = {
			effect_tooltip = {
				STM = {
					add_ideas = TMP_army_defections
				}
			}
		}
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_extend_conscription
	icon = GFX_goal_generic_construction
	x = -2
	y = 1
	relative_position_id = TMP_unrelenting_offensive
	cost = 5
	prerequisite = {
		focus = TMP_unrelenting_offensive
	}
	bypass = {
		OR = {
			has_idea = extensive_conscription
			has_idea = service_by_requirement
			has_idea = all_adults_serve
			has_idea = scraping_the_barrel
		}
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_extend_conscription"
		add_ideas = extensive_conscription
		if = {
			limit = {
				has_country_flag = TMP_grubber_empowered
				#grubber idea check
			}
			add_manpower = 50
		}
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_army_of_turncoats
	icon = GFX_goal_generic_construction
	x = -1
	y = 1
	relative_position_id = TMP_encourage_enemy_defections
	cost = 5
	prerequisite = {
		focus = TMP_encourage_enemy_defections
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_army_of_turncoats"
		effect_tooltip = {
			STM = {
				add_manpower = -75
			}
		}
		if = {
			limit = {
				has_country_flag = TMP_grubber_empowered
				#grubber idea check
			}
			custom_effect_tooltip = TMP_turncoat_soldiers_tt
			hidden_effect = {
				load_oob = "TMP_turncoat_soldiers"
			}
		}
		else = {
			add_manpower = 50
		}
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_behind_the_lines
	icon = GFX_goal_generic_construction
	x = 1
	y = 1
	relative_position_id = TMP_encourage_enemy_defections
	cost = 5
	prerequisite = {
		focus = TMP_encourage_enemy_defections
	}
	prerequisite = {
		focus = TMP_extend_conscription
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_behind_the_lines"
		STM = {
			country_event = tempest.11
		}
		effect_tooltip = {
			STM = {
				add_ideas = TMP_industrial_sabotage
			}
		}
		if = {
			limit = {
				has_country_flag = TMP_grubber_empowered
				#grubber idea check
			}
			custom_effect_tooltip = TMP_saboteur_soldiers_tt
			hidden_effect = {
				load_oob = "TMP_saboteur_soldiers"
			}
		}
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_soldier_civilians
	icon = GFX_goal_generic_construction
	x = 1
	y = 1
	relative_position_id = TMP_extend_conscription
	cost = 5
	prerequisite = {
		focus = TMP_extend_conscription
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_soldier_civilians"
		if = {
			limit = {
				has_country_flag = TMP_grubber_empowered
				#grubber idea check
			}
			add_manpower = 150
		}
		else = {
			add_manpower = 75
		}
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_equine_engineering
	icon = GFX_goal_generic_construction
	x = 4
	y = 1
	relative_position_id = TMP_unrelenting_offensive
	cost = 5
	prerequisite = {
		focus = TMP_unrelenting_offensive
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_equine_engineering"
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_supply_the_front
	icon = GFX_goal_generic_construction
	x = 2
	y = 1
	relative_position_id = TMP_unrelenting_offensive
	cost = 5
	prerequisite = {
		focus = TMP_unrelenting_offensive
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_supply_the_front"
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_extended_shifts
	icon = GFX_goal_generic_construction
	x = 1
	y = 1
	relative_position_id = TMP_equine_engineering
	cost = 5
	prerequisite = {
		focus = TMP_equine_engineering
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_extended_shifts"
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_storm_staff_overcharge
	icon = GFX_goal_generic_construction
	x = -1
	y = 1
	relative_position_id = TMP_equine_engineering
	cost = 5
	prerequisite = {
		focus = TMP_equine_engineering
	}
	prerequisite = {
		focus = TMP_supply_the_front
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_storm_staff_overcharge"
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}

shared_focus = {
	id = TMP_second_wind
	icon = GFX_goal_generic_construction
	x = -1
	y = 1
	relative_position_id = TMP_supply_the_front
	cost = 5
	prerequisite = {
		focus = TMP_supply_the_front
	}
	
	ai_will_do = {
		factor = 80
	}
	completion_reward = {
		log = "[GetDateText]: [Root.GetName]: Focus TMP_second_wind"
	}
	search_filters = { FOCUS_FILTER_MANPOWER }
}
